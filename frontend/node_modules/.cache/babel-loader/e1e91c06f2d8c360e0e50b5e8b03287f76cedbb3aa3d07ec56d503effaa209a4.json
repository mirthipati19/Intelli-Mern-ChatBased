{"ast":null,"code":"import{AddIcon}from\"@chakra-ui/icons\";import{Box,Stack,Text}from\"@chakra-ui/layout\";import{useToast}from\"@chakra-ui/toast\";import axios from\"axios\";import{useEffect,useState}from\"react\";import{getSender}from\"../config/ChatLogics\";import ChatLoading from\"./ChatLoading\";import GroupChatModal from\"./miscellaneous/GroupChatModal\";import{Button}from\"@chakra-ui/react\";import{ChatState}from\"../Context/ChatProvider\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const MyChats=_ref=>{let{fetchAgain}=_ref;const[loggedUser,setLoggedUser]=useState();const{selectedChat,setSelectedChat,user,chats,setChats}=ChatState();const toast=useToast();const fetchChats=async()=>{// console.log(user._id);\ntry{const config={headers:{Authorization:\"Bearer \".concat(user.token)}};const{data}=await axios.get(\"/api/chat\",config);setChats(data);}catch(error){toast({title:\"Error Occured!\",description:\"Failed to Load the chats\",status:\"error\",duration:5000,isClosable:true,position:\"bottom-left\"});}};useEffect(()=>{setLoggedUser(JSON.parse(localStorage.getItem(\"userInfo\")));fetchChats();// eslint-disable-next-line\n},[fetchAgain]);return/*#__PURE__*/_jsxs(Box,{d:{base:selectedChat?\"none\":\"flex\",md:\"flex\"},flexDir:\"column\",alignItems:\"center\",p:3,bg:\"white\",w:{base:\"100%\",md:\"31%\"},borderRadius:\"lg\",borderWidth:\"1px\",children:[/*#__PURE__*/_jsxs(Box,{pb:3,px:3,fontSize:{base:\"28px\",md:\"30px\"},fontFamily:\"Work sans\",d:\"flex\",w:\"100%\",justifyContent:\"space-between\",alignItems:\"center\",children:[\"My Chats\",/*#__PURE__*/_jsx(GroupChatModal,{children:/*#__PURE__*/_jsx(Button,{d:\"flex\",fontSize:{base:\"17px\",md:\"10px\",lg:\"17px\"},rightIcon:/*#__PURE__*/_jsx(AddIcon,{}),children:\"New Group Chat\"})})]}),/*#__PURE__*/_jsx(Box,{d:\"flex\",flexDir:\"column\",p:3,bg:\"#F8F8F8\",w:\"100%\",h:\"100%\",borderRadius:\"lg\",overflowY:\"hidden\",children:chats?/*#__PURE__*/_jsx(Stack,{overflowY:\"scroll\",children:chats.map(chat=>/*#__PURE__*/_jsxs(Box,{onClick:()=>setSelectedChat(chat),cursor:\"pointer\",bg:selectedChat===chat?\"#38B2AC\":\"#E8E8E8\",color:selectedChat===chat?\"white\":\"black\",px:3,py:2,borderRadius:\"lg\",children:[/*#__PURE__*/_jsx(Text,{children:!chat.isGroupChat?getSender(loggedUser,chat.users):chat.chatName}),chat.latestMessage&&/*#__PURE__*/_jsxs(Text,{fontSize:\"xs\",children:[/*#__PURE__*/_jsxs(\"b\",{children:[chat.latestMessage.sender.name,\" : \"]}),chat.latestMessage.content.length>50?chat.latestMessage.content.substring(0,51)+\"...\":chat.latestMessage.content]})]},chat._id))}):/*#__PURE__*/_jsx(ChatLoading,{})})]});};export default MyChats;","map":{"version":3,"names":["AddIcon","Box","Stack","Text","useToast","axios","useEffect","useState","getSender","ChatLoading","GroupChatModal","Button","ChatState","jsx","_jsx","jsxs","_jsxs","MyChats","_ref","fetchAgain","loggedUser","setLoggedUser","selectedChat","setSelectedChat","user","chats","setChats","toast","fetchChats","config","headers","Authorization","concat","token","data","get","error","title","description","status","duration","isClosable","position","JSON","parse","localStorage","getItem","d","base","md","flexDir","alignItems","p","bg","w","borderRadius","borderWidth","children","pb","px","fontSize","fontFamily","justifyContent","lg","rightIcon","h","overflowY","map","chat","onClick","cursor","color","py","isGroupChat","users","chatName","latestMessage","sender","name","content","length","substring","_id"],"sources":["/Users/murarimirthipati/Desktop/Personal/MERN-CHAT-APP/frontend/src/components/MyChats.js"],"sourcesContent":["import { AddIcon } from \"@chakra-ui/icons\";\nimport { Box, Stack, Text } from \"@chakra-ui/layout\";\nimport { useToast } from \"@chakra-ui/toast\";\nimport axios from \"axios\";\nimport { useEffect, useState } from \"react\";\nimport { getSender } from \"../config/ChatLogics\";\nimport ChatLoading from \"./ChatLoading\";\nimport GroupChatModal from \"./miscellaneous/GroupChatModal\";\nimport { Button } from \"@chakra-ui/react\";\nimport { ChatState } from \"../Context/ChatProvider\";\n\nconst MyChats = ({ fetchAgain }) => {\n  const [loggedUser, setLoggedUser] = useState();\n\n  const { selectedChat, setSelectedChat, user, chats, setChats } = ChatState();\n\n  const toast = useToast();\n\n  const fetchChats = async () => {\n    // console.log(user._id);\n    try {\n      const config = {\n        headers: {\n          Authorization: `Bearer ${user.token}`,\n        },\n      };\n\n      const { data } = await axios.get(\"/api/chat\", config);\n      setChats(data);\n    } catch (error) {\n      toast({\n        title: \"Error Occured!\",\n        description: \"Failed to Load the chats\",\n        status: \"error\",\n        duration: 5000,\n        isClosable: true,\n        position: \"bottom-left\",\n      });\n    }\n  };\n\n  useEffect(() => {\n    setLoggedUser(JSON.parse(localStorage.getItem(\"userInfo\")));\n    fetchChats();\n    // eslint-disable-next-line\n  }, [fetchAgain]);\n\n  return (\n    <Box\n      d={{ base: selectedChat ? \"none\" : \"flex\", md: \"flex\" }}\n      flexDir=\"column\"\n      alignItems=\"center\"\n      p={3}\n      bg=\"white\"\n      w={{ base: \"100%\", md: \"31%\" }}\n      borderRadius=\"lg\"\n      borderWidth=\"1px\"\n    >\n      <Box\n        pb={3}\n        px={3}\n        fontSize={{ base: \"28px\", md: \"30px\" }}\n        fontFamily=\"Work sans\"\n        d=\"flex\"\n        w=\"100%\"\n        justifyContent=\"space-between\"\n        alignItems=\"center\"\n      >\n        My Chats\n        <GroupChatModal>\n          <Button\n            d=\"flex\"\n            fontSize={{ base: \"17px\", md: \"10px\", lg: \"17px\" }}\n            rightIcon={<AddIcon />}\n          >\n            New Group Chat\n          </Button>\n        </GroupChatModal>\n      </Box>\n      <Box\n        d=\"flex\"\n        flexDir=\"column\"\n        p={3}\n        bg=\"#F8F8F8\"\n        w=\"100%\"\n        h=\"100%\"\n        borderRadius=\"lg\"\n        overflowY=\"hidden\"\n      >\n        {chats ? (\n          <Stack overflowY=\"scroll\">\n            {chats.map((chat) => (\n              <Box\n                onClick={() => setSelectedChat(chat)}\n                cursor=\"pointer\"\n                bg={selectedChat === chat ? \"#38B2AC\" : \"#E8E8E8\"}\n                color={selectedChat === chat ? \"white\" : \"black\"}\n                px={3}\n                py={2}\n                borderRadius=\"lg\"\n                key={chat._id}\n              >\n                <Text>\n                  {!chat.isGroupChat\n                    ? getSender(loggedUser, chat.users)\n                    : chat.chatName}\n                </Text>\n                {chat.latestMessage && (\n                  <Text fontSize=\"xs\">\n                    <b>{chat.latestMessage.sender.name} : </b>\n                    {chat.latestMessage.content.length > 50\n                      ? chat.latestMessage.content.substring(0, 51) + \"...\"\n                      : chat.latestMessage.content}\n                  </Text>\n                )}\n              </Box>\n            ))}\n          </Stack>\n        ) : (\n          <ChatLoading />\n        )}\n      </Box>\n    </Box>\n  );\n};\n\nexport default MyChats;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}