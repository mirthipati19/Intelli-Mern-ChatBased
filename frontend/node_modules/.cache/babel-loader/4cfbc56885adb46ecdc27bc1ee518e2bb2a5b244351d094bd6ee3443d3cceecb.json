{"ast":null,"code":"import{Box}from\"@chakra-ui/layout\";import{useEffect,useRef}from\"react\";import ScrollableFeed from\"react-scrollable-feed\";import{Avatar}from\"@chakra-ui/avatar\";import{Tooltip}from\"@chakra-ui/tooltip\";import{isLastMessage,isSameSender,isSameSenderMargin,isSameUser}from\"../config/ChatLogics\";import{ChatState}from\"../Context/ChatProvider\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const ScrollableChat=_ref=>{let{messages}=_ref;const{user}=ChatState();const messagesEndRef=useRef(null);useEffect(()=>{scrollToBottom();},[messages]);const scrollToBottom=()=>{var _messagesEndRef$curre;(_messagesEndRef$curre=messagesEndRef.current)===null||_messagesEndRef$curre===void 0?void 0:_messagesEndRef$curre.scrollIntoView({behavior:\"smooth\"});};return/*#__PURE__*/_jsx(Box,{maxHeight:\"70vh\"// Adjust as needed\n,overflowY:\"auto\"// Allow vertical scrolling\n,children:/*#__PURE__*/_jsxs(ScrollableFeed,{children:[messages&&messages.map((m,i)=>/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\"},children:[(isSameSender(messages,m,i,user._id)||isLastMessage(messages,i,user._id))&&/*#__PURE__*/_jsx(Tooltip,{label:m.sender.name,placement:\"bottom-start\",hasArrow:true,children:/*#__PURE__*/_jsx(Avatar,{mt:\"7px\",mr:1,size:\"sm\",cursor:\"pointer\",name:m.sender.name,src:m.sender.pic})}),/*#__PURE__*/_jsx(\"span\",{style:{backgroundColor:\"\".concat(m.sender._id===user._id?\"#BEE3F8\":\"#B9F5D0\"),marginLeft:isSameSenderMargin(messages,m,i,user._id),marginTop:isSameUser(messages,m,i,user._id)?3:10,borderRadius:\"20px\",padding:\"5px 15px\",maxWidth:\"75%\"},children:m.content})]},m._id)),/*#__PURE__*/_jsx(\"div\",{ref:messagesEndRef})]})});};export default ScrollableChat;","map":{"version":3,"names":["Box","useEffect","useRef","ScrollableFeed","Avatar","Tooltip","isLastMessage","isSameSender","isSameSenderMargin","isSameUser","ChatState","jsx","_jsx","jsxs","_jsxs","ScrollableChat","_ref","messages","user","messagesEndRef","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","maxHeight","overflowY","children","map","m","i","style","display","_id","label","sender","name","placement","hasArrow","mt","mr","size","cursor","src","pic","backgroundColor","concat","marginLeft","marginTop","borderRadius","padding","maxWidth","content","ref"],"sources":["/Users/murarimirthipati/Desktop/Personal/MERN-CHAT-APP/frontend/src/components/ScrollableChat.js"],"sourcesContent":["import { Box } from \"@chakra-ui/layout\";\nimport { useEffect, useRef } from \"react\";\nimport ScrollableFeed from \"react-scrollable-feed\";\nimport { Avatar } from \"@chakra-ui/avatar\";\nimport { Tooltip } from \"@chakra-ui/tooltip\";\nimport {\n  isLastMessage,\n  isSameSender,\n  isSameSenderMargin,\n  isSameUser,\n} from \"../config/ChatLogics\";\nimport { ChatState } from \"../Context/ChatProvider\";\n\nconst ScrollableChat = ({ messages }) => {\n  const { user } = ChatState();\n  const messagesEndRef = useRef(null);\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\n  };\n\n  return (\n    <Box\n      maxHeight=\"70vh\" // Adjust as needed\n      overflowY=\"auto\" // Allow vertical scrolling\n    >\n      <ScrollableFeed>\n        {messages &&\n          messages.map((m, i) => (\n            <div style={{ display: \"flex\" }} key={m._id}>\n              {(isSameSender(messages, m, i, user._id) ||\n                isLastMessage(messages, i, user._id)) && (\n                <Tooltip label={m.sender.name} placement=\"bottom-start\" hasArrow>\n                  <Avatar\n                    mt=\"7px\"\n                    mr={1}\n                    size=\"sm\"\n                    cursor=\"pointer\"\n                    name={m.sender.name}\n                    src={m.sender.pic}\n                  />\n                </Tooltip>\n              )}\n              <span\n                style={{\n                  backgroundColor: `${\n                    m.sender._id === user._id ? \"#BEE3F8\" : \"#B9F5D0\"\n                  }`,\n                  marginLeft: isSameSenderMargin(messages, m, i, user._id),\n                  marginTop: isSameUser(messages, m, i, user._id) ? 3 : 10,\n                  borderRadius: \"20px\",\n                  padding: \"5px 15px\",\n                  maxWidth: \"75%\",\n                }}\n              >\n                {m.content}\n              </span>\n            </div>\n          ))}\n        <div ref={messagesEndRef} />\n      </ScrollableFeed>\n    </Box>\n  );\n};\n\nexport default ScrollableChat;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}